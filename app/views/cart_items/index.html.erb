<div class="container">
  <div class="row">
    <div class="col-sm-8 col-md-8 col-lg-8 px-sm-0">
      <h5 class="mt-4 mb-3 ml-4"><span class="px-4 title">ショッピングカート</span></h5>
    </div>
    <div class="col-sm-4 col-md-4 col-lg-4 px-sm-0 py-3 text-right">
      <%= link_to "カートを空にする", cart_items_path, method: :delete, class: "btn btn-danger" %>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-4 col-md-4 col-lg-3 px-sm-0 grid py-2">
      <strong class="pl-2">商品名</strong>
    </div>

    <div class="col-sm-2 col-md-2 col-lg-1 px-sm-0 head-grid py-2">
      <strong class="pl-2">単価(税込)</strong>
    </div>

    <div class="col-sm-3 col-md-2 col-lg-2 px-sm-0 head-grid py-2">
      <strong class="pl-2">数量</strong>
    </div>

    <div class="col-sm-1 col-md-2 col-lg-1 px-sm-0 head-grid py-2">
      <strong class="pl-2">小計</strong>
    </div>

    <div class="col-sm-2 col-md-2 col-lg-1 px-sm-0 head-grid">
      <p></p>
    </div>
  </div>

  <% @cart_items.each do |cart_item| %>

  <div class="row">
    <div class="col-sm-4 col-md-4 col-lg-3 px-sm-0 item-head-grid">
      <%= attachment_image_tag cart_item.item, :image, class: "p-2 cart-item-image" %>
      <%= cart_item.item.name %>
    </div>

    <div class="col-sm-2 col-md-2 col-lg-1 pl-2 item-grid py-2">
      <%= cart_item.item.with_tax_price.to_s(:delimited) %>
    </div>


    <div class="col-sm-3 col-md-2 col-lg-2 px-sm-0 item-grid py-1 px-1 pl-2 text-center">
    <%= form_with model: cart_item, local:true do |f| %>
      <%= f.select :amount, *[1..10], class: 'select-box my-1', require: true %>
      <%= f.submit "変更", class: "btn btn-sm btn-success" %>
    <% end %>
    </div>


    <div class="col-sm-1 col-md-2 col-lg-1 item-grid py-2 pl-2">
      <%= cart_item.subtotal %>
    </div>

    <div class="col-sm-2 col-md-2 col-lg-1 px-sm-0 item-grid py-1 text-center">
      <%= link_to "削除する", cart_item_path(cart_item.id), method: :delete, class: "btn btn-sm btn-danger" %>
    </div>
  </div>

  <% end %>

  <div class="row">
    <div class="col-sm-4 col-md-4 col-lg-3 px-sm-0 mt-4">
      <%= link_to "買い物を続ける", items_path, class: "btn btn-primary" %>
    </div>

    <div class="col-sm-4 col-md-4 col-lg-3 px-sm-0 mt-3">
      <p></p>
    </div>

    <div class="col-sm-2 col-md-2 col-lg-1 mt-3 px-sm-0 py-3 grid">
      <strong class="pl-2">合計金額</strong>
    </div>

    <div class="col-sm-2 col-md-2 col-lg-1 mt-3 py-3 pl-2 cart-item-grid">
      <%= @total.to_s(:delimited) %>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12 col-md-12 col-lg-8 px-sm-0 mt-5 text-center">
      <%= link_to "情報入力に進む", new_order_path, class: "btn btn-success px-3" %>
    </div>
  </div>

</div>

